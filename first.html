<!DOCTYPE html>
<html>
<body>
<script charset="utf-8">
  

//Задание 1.1
function ucFirst(str) {
  if (!str) return 'Ой!';
  return str[0].toUpperCase() + str.slice(1).toLowerCase();
}

str1 = prompt('Задание 1:', '');
alert(ucFirst(str1));



//Задание 1.2
function correctSpaces(str){

  return str.replace(/([,.:;?!])/g, "$1 ")
    .replace(/ +/g, ' ')
    .replace(/ ([,.:;?!])/g, "$1")
    .trim();
}

str2 = prompt('Задание 2:', '');
alert(correctSpaces(str2));



// //Задание 1.3
function countWords(str) {
     return str.split(' ')
            .filter((n) => {return n != '' })//без filter много пробелов считает за слова или выводит null при esc или отмена 
            .length;
}

str3 = prompt('Задание 3:', '');
alert(countWords(str3));



// Задание 1.4
// Меня смущвют слова  типа ёлки-палки (одно слово), а ведь "дом-это хорошо" тут уже "дом" и "это"
// два разных слова, а разделитель - один у обоих... Разве что если подразумевать,что "дом_-_это"(где _пробел)
//это 2 слова а "дом-это" одно слово, но тогда '-' будет считаться отдельным словом поэтому проверка в filter на -
function uniqueWords(str) {

    let arr = str.split(/[ .,!?;:]/).filter((n) => { return n != '' && n != '-' });

    let wordsOccurenceMap = arr.reduce( (acc, word) => {
      (acc[word] = acc[word]) ? acc[word] + 1 : 1;
      return acc;
    },{} ); 
    
    let resultMap = [];

    resultMap = Object.entries(wordsOccurenceMap).map( ([word, amount]) => {
        return { word, amount };
    } );

    if((JSON.stringify(resultMap, null, 4))=='[]') return 'Слов нет!'
    else return (JSON.stringify(resultMap, null, 4));

}
 
str4 = prompt('Задание 4:', '');
alert(uniqueWords(str4));

 </script>
 </body>
 </html>